{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/Users/benjamingordon/Documents/civic-alley-visualization/data-vis/containers/ItemsPage/BudgetItemVisualization/BudgetItemVisualization.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport * as actions from '../../../store/actions/index';\nimport BudgetItem from '../../../components/BudgetItem/BudgetItem';\n\nclass BudgetItemVisualization extends Component {\n  constructor(...args) {\n    super(...args);\n\n    _defineProperty(this, \"state\", {\n      firstPageLoad: false\n    });\n\n    _defineProperty(this, \"findDistrict\", district => {\n      if (this.props.councilMembers) {\n        var councilMember = this.props.councilMembers.filter(item => item.district === district.match(/\\d+/)[0]);\n        return councilMember;\n      }\n    });\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    //when first loaded, check if we can find the items from the url\n    if (!this.state.firstPageLoad && this.props.loaded) {\n      console.log('we loaded and the first page hasnt loaded'); // this.props.onSetMap(this.props.districts, this.props.selectedDistricts, this.props.councilMembers, this.props.selectedBudgetItems);\n\n      this.setState({\n        firstPageLoad: true\n      });\n\n      if (this.props.router) {\n        if (this.props.router.query.id === '1') {\n          console.log('did we load', this.props.router.query.id);\n          console.log('did we load', this.props.router.query.lat, this.props.router.query.lng, this.props.router.query.title);\n          this.props.onFindItem(this.props.participatoryBudget, this.props.router.query.lat, this.props.router.query.lng, this.props.router.query.title);\n        } else if (this.props.router.query.id === '2') {\n          console.log('did we load', this.props.router.query.id);\n          this.props.onBudgetFilterFromURL(this.props.participatoryBudget, this.props.router.query);\n        }\n      }\n    }\n  }\n\n  render() {\n    console.log(this.props);\n    let budgetItems = [];\n\n    if (this.props.selectedBudgetItems) {\n      this.props.selectedBudgetItems.map((item, idx) => {\n        budgetItems.push( /*#__PURE__*/_jsxDEV(BudgetItem, _objectSpread(_objectSpread({}, item), {}, {\n          councilMember: this.findDistrict(item.council_district) // clicked={() => this.setCenter(item)}\n\n        }), idx, false, {\n          fileName: _jsxFileName,\n          lineNumber: 48,\n          columnNumber: 35\n        }, this));\n      });\n    }\n\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: this.props.selectedBudgetItems ? budgetItems : null\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\nconst mapStateToProps = state => {\n  return {\n    selectedBudgetItems: state.setMap.selectedBudgetItems,\n    councilMembers: state.participatoryBudget.councilMembers,\n    loaded: state.participatoryBudget.loaded\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    onZoomMarker: center => dispatch(actions.zoomMarker(center)),\n    onZoomIn: () => dispatch(actions.zoomIn()),\n    onZoomOut: () => dispatch(actions.zoomOut())\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(BudgetItemVisualization);","map":{"version":3,"sources":["/Users/benjamingordon/Documents/civic-alley-visualization/data-vis/containers/ItemsPage/BudgetItemVisualization/BudgetItemVisualization.js"],"names":["React","Component","connect","actions","BudgetItem","BudgetItemVisualization","firstPageLoad","district","props","councilMembers","councilMember","filter","item","match","componentDidUpdate","prevProps","prevState","state","loaded","console","log","setState","router","query","id","lat","lng","title","onFindItem","participatoryBudget","onBudgetFilterFromURL","render","budgetItems","selectedBudgetItems","map","idx","push","findDistrict","council_district","mapStateToProps","setMap","mapDispatchToProps","dispatch","onZoomMarker","center","zoomMarker","onZoomIn","zoomIn","onZoomOut","zoomOut"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\nimport {connect} from 'react-redux';\nimport * as actions from '../../../store/actions/index';\n\nimport BudgetItem from '../../../components/BudgetItem/BudgetItem'\n\nclass BudgetItemVisualization extends Component {\n\n    state = {\n        firstPageLoad: false,\n    }\n\n    componentDidUpdate(prevProps, prevState){\n        //when first loaded, check if we can find the items from the url\n        if(!this.state.firstPageLoad && this.props.loaded){       \n            console.log('we loaded and the first page hasnt loaded')\n            \n            // this.props.onSetMap(this.props.districts, this.props.selectedDistricts, this.props.councilMembers, this.props.selectedBudgetItems);\n            this.setState({firstPageLoad: true})\n\n            if(this.props.router){\n                if(this.props.router.query.id === '1'){            \n                    console.log('did we load', this.props.router.query.id)    \n                    console.log('did we load', this.props.router.query.lat, this.props.router.query.lng, this.props.router.query.title)    \n                    this.props.onFindItem(this.props.participatoryBudget, this.props.router.query.lat, this.props.router.query.lng, this.props.router.query.title);\n                }else if(this.props.router.query.id === '2'){                \n                    console.log('did we load', this.props.router.query.id)    \n                    this.props.onBudgetFilterFromURL(this.props.participatoryBudget, this.props.router.query);            \n                }  \n            }\n        }\n    }\n\n    findDistrict = (district) => {\n        if(this.props.councilMembers){                        \n            var councilMember = this.props.councilMembers.filter(item => item.district === district.match(/\\d+/)[0]);            \n            return councilMember;\n        }\n    }\n\n    render(){\n\n        console.log(this.props)\n\n        let budgetItems = [];\n        if(this.props.selectedBudgetItems){\n            this.props.selectedBudgetItems.map((item,idx )=> {\n                budgetItems.push( <BudgetItem \n                            key={idx} \n                            {...item} \n                            councilMember={this.findDistrict(item.council_district)} \n                            // clicked={() => this.setCenter(item)}\n                        />\n                    );\n            })\n        }\n        \n        return(\n            <div>                                                \n                {this.props.selectedBudgetItems ? budgetItems : null}\n            </div>\n        );\n    }\n}\n\nconst mapStateToProps = state => {\n    return {\n        selectedBudgetItems: state.setMap.selectedBudgetItems,\n        councilMembers: state.participatoryBudget.councilMembers,\n        loaded: state.participatoryBudget.loaded,\n    }\n}\n\nconst mapDispatchToProps = dispatch => {\n    return {\n        onZoomMarker: (center) => dispatch(actions.zoomMarker(center)),\n        onZoomIn: () => dispatch(actions.zoomIn()),\n        onZoomOut: () => dispatch(actions.zoomOut()),        \n    }\n}\n\nexport default connect(mapStateToProps,mapDispatchToProps)(BudgetItemVisualization);"]},"metadata":{},"sourceType":"module"}