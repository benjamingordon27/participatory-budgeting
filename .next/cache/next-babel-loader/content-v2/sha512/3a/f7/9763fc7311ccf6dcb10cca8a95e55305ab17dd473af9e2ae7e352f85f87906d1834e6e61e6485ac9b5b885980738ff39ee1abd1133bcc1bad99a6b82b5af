{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport _classCallCheck from \"/Users/benjamingordon/Documents/civic-alley-visualization/data-vis/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/benjamingordon/Documents/civic-alley-visualization/data-vis/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"/Users/benjamingordon/Documents/civic-alley-visualization/data-vis/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"/Users/benjamingordon/Documents/civic-alley-visualization/data-vis/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"/Users/benjamingordon/Documents/civic-alley-visualization/data-vis/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/benjamingordon/Documents/civic-alley-visualization/data-vis/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _defineProperty from \"/Users/benjamingordon/Documents/civic-alley-visualization/data-vis/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nvar _jsxFileName = \"/Users/benjamingordon/Documents/civic-alley-visualization/data-vis/components/D3/HorizontalBarChart/HorizontalBarChart.js\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React, { Component } from 'react';\nimport * as d3 from \"d3\";\nimport classes from './HorizontalBarChart.module.css';\nimport { numberFormatter } from '../../../util/numberFormatting';\n\nvar HorizontalBarChart = /*#__PURE__*/function (_Component) {\n  _inherits(HorizontalBarChart, _Component);\n\n  var _super = _createSuper(HorizontalBarChart);\n\n  function HorizontalBarChart() {\n    var _this;\n\n    _classCallCheck(this, HorizontalBarChart);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n\n    _defineProperty(_assertThisInitialized(_this), \"showItem\", function (idx) {\n      _this.props.labelClicked(_this.props.dataToGraph[idx]);\n    });\n\n    return _this;\n  }\n\n  _createClass(HorizontalBarChart, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var data = this.props.dataToGraph;\n      var innerHeight = this.props.height - this.props.margin.top - this.props.margin.bottom;\n      var innerWidth = this.props.width - this.props.margin.left - this.props.margin.right; //this sets the yScale \n\n      var yScale = d3.scaleBand().domain(data.map(function (d) {\n        return d.title;\n      })) //the label\n      .range([0, innerHeight]) //ranging from 0 px to the height px\n      .padding(this.props.padding);\n      var xScale = d3.scaleLinear().domain([0, d3.max(data, function (d) {\n        return d[_this2.props.variable];\n      })]).range([0, innerWidth]);\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: classes.HorizontalBarChart,\n        children: [this.props.description ? /*#__PURE__*/_jsxDEV(\"p\", {\n          style: {\n            textAlign: 'center',\n            fontSize: '28px'\n          },\n          children: this.props.description\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 33,\n          columnNumber: 43\n        }, this) : null, /*#__PURE__*/_jsxDEV(\"svg\", {\n          width: this.props.width,\n          height: this.props.height,\n          children: /*#__PURE__*/_jsxDEV(\"g\", {\n            transform: \"translate(\".concat(this.props.margin.left, \", \").concat(this.props.margin.top, \")\"),\n            children: [xScale.ticks().map(function (tickValue, idx) {\n              return /*#__PURE__*/_jsxDEV(\"g\", {\n                transform: \"translate(\".concat(xScale(tickValue), \",0)\"),\n                children: /*#__PURE__*/_jsxDEV(\"text\", {\n                  style: {\n                    textAnchor: 'middle'\n                  },\n                  dy: \".71em\",\n                  y: innerHeight + 3,\n                  children: idx % 2 - 1 ? \"\".concat(_this2.props.dollar ? '$' : '').concat(numberFormatter(tickValue)) : null\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 41,\n                  columnNumber: 33\n                }, _this2)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 40,\n                columnNumber: 29\n              }, _this2);\n            }), yScale.domain().map(function (tickValue, idx) {\n              return /*#__PURE__*/_jsxDEV(\"text\", {\n                style: {\n                  textAnchor: 'end'\n                },\n                x: -3,\n                dy: \".32em\",\n                y: yScale(tickValue) + yScale.bandwidth() / 2,\n                onClick: function onClick() {\n                  return _this2.showItem(idx);\n                },\n                children: [tickValue.substring(0, 36), tickValue.length > 36 ? \"...\" : '']\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 54,\n                columnNumber: 29\n              }, _this2);\n            }), data.map(function (d, idx) {\n              return /*#__PURE__*/_jsxDEV(\"rect\", {\n                style: {\n                  fill: _this2.props.rectColor\n                },\n                x: 0,\n                y: yScale(d.title),\n                width: xScale(d[_this2.props.variable]),\n                height: yScale.bandwidth(),\n                onClick: function onClick() {\n                  return _this2.showItem(idx);\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 67,\n                columnNumber: 33\n              }, _this2);\n            }), data.map(function (d, idx) {\n              return /*#__PURE__*/_jsxDEV(\"text\", {\n                style: {\n                  textAnchor: 'end',\n                  fill: _this2.props.numberColor\n                },\n                dy: \"1.1em\",\n                x: xScale(d[_this2.props.variable]) - 5,\n                y: yScale(d.title) + _this2.props.padding * 0.5,\n                onClick: function onClick() {\n                  return _this2.showItem(idx);\n                },\n                children: [_this2.props.dollar ? '$' : '', numberFormatter(d[_this2.props.variable])]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 79,\n                columnNumber: 33\n              }, _this2);\n            }), /*#__PURE__*/_jsxDEV(\"text\", {\n              textAnchor: \"middle\",\n              x: innerWidth / 2,\n              children: this.props.chartTitle\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 89,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"text\", {\n              textAnchor: \"middle\",\n              x: innerWidth / 2,\n              y: innerHeight + 40,\n              children: this.props.xAxisLabel\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 90,\n              columnNumber: 25\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 36,\n            columnNumber: 21\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 35,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 32,\n        columnNumber: 13\n      }, this);\n    }\n  }]);\n\n  return HorizontalBarChart;\n}(Component);\n\nexport default HorizontalBarChart;","map":{"version":3,"sources":["/Users/benjamingordon/Documents/civic-alley-visualization/data-vis/components/D3/HorizontalBarChart/HorizontalBarChart.js"],"names":["React","Component","d3","classes","numberFormatter","HorizontalBarChart","idx","props","labelClicked","dataToGraph","data","innerHeight","height","margin","top","bottom","innerWidth","width","left","right","yScale","scaleBand","domain","map","d","title","range","padding","xScale","scaleLinear","max","variable","description","textAlign","fontSize","ticks","tickValue","textAnchor","dollar","bandwidth","showItem","substring","length","fill","rectColor","numberColor","chartTitle","xAxisLabel"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\nimport * as d3 from \"d3\";\nimport classes from './HorizontalBarChart.module.css';\n\nimport {numberFormatter} from '../../../util/numberFormatting';\n\nclass HorizontalBarChart extends Component {\n\n    showItem = (idx) => {\n        this.props.labelClicked(this.props.dataToGraph[idx]);\n    }\n\n    render(){                   \n\n        let data = this.props.dataToGraph;\n\n        const innerHeight = this.props.height - this.props.margin.top - this.props.margin.bottom;\n        const innerWidth = this.props.width - this.props.margin.left - this.props.margin.right;\n\n        //this sets the yScale \n        const yScale = d3.scaleBand()\n            .domain(data.map(d => d.title)) //the label\n            .range([0, innerHeight]) //ranging from 0 px to the height px\n            .padding(this.props.padding)\n\n        const xScale = d3.scaleLinear()\n            .domain([0, d3.max(data, d => d[this.props.variable])])\n            .range([0, innerWidth]);\n\n        return(\n            \n            <div className={classes.HorizontalBarChart}>\n                {this.props.description ? <p style={{textAlign: 'center', fontSize: '28px'}}>{this.props.description}</p> : null}\n\n                <svg width={this.props.width} height={this.props.height}>\n                    <g transform={`translate(${this.props.margin.left}, ${this.props.margin.top})`}>\n                        \n                        {/* Draw the xAxis */}\n                        {xScale.ticks().map((tickValue,idx) => (\n                            <g transform={`translate(${xScale(tickValue)},0)`}>\n                                <text \n                                    style={{textAnchor: 'middle'}} \n                                    dy='.71em' \n                                    y={innerHeight+3}\n                                >\n                                    {/* {priceFormatter.format(tickValue)} */}\n                                    {(idx%2 - 1) ? `${this.props.dollar?'$':''}${numberFormatter(tickValue)}` : null}\n                                </text>\n                            </g>\n                        ))}\n\n                        {/* Draw the yAxis */}\n                        {yScale.domain().map((tickValue,idx) => (                            \n                            <text \n                                style={{textAnchor: 'end'}} \n                                x={-3} \n                                dy='.32em'\n                                y={yScale(tickValue) + yScale.bandwidth()/2}\n                                onClick = {() => this.showItem(idx)}\n                            >                                    \n                                {tickValue.substring(0, 36)}{tickValue.length > 36 ? `...` :''}\n                            </text>                            \n                        ))}          \n\n                        {/* Draw the bars themselves */}              \n                        {data.map((d,idx) => (\n                                <rect     \n                                    style = {{fill: this.props.rectColor}}       \n                                    x={0} \n                                    y={yScale(d.title)} \n                                    width={xScale(d[this.props.variable])} \n                                    height={yScale.bandwidth()}\n                                    onClick = {() => this.showItem(idx)}\n                                />                            \n                        ))}\n\n                        {/* Draw the labels on the bars */}\n                        {data.map((d,idx) => (\n                                <text            \n                                    style = {{textAnchor: 'end', fill: this.props.numberColor}}                        \n                                    dy='1.1em'\n                                    x={xScale(d[this.props.variable]) - 5} \n                                    y={yScale(d.title)+this.props.padding*0.5} \n                                    onClick = {() => this.showItem(idx)}\n                                > \n                                    {this.props.dollar?'$':''}{numberFormatter(d[this.props.variable])}\n                                </text>\n                        ))}\n                        <text textAnchor='middle' x={innerWidth/2}>{this.props.chartTitle}</text>\n                        <text textAnchor='middle' x={innerWidth/2} y={innerHeight + 40}>{this.props.xAxisLabel}</text>\n                    </g>\n                </svg>\n            </div>\n        );\n    }\n}\n\nexport default HorizontalBarChart;"]},"metadata":{},"sourceType":"module"}